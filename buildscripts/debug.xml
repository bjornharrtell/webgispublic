<?xml version="1.0" encoding="UTF-8"?>
<project name="WebGIS Public debug deployment" default="deploy" basedir=".">
	<property name="extjsurl" value="http://www.extjs.com/products/extjs/download.php?dl=extjs22"/>
	<property name="openlayersurl" value="http://www.openlayers.org/download/OpenLayers-2.7.zip"/>

	<target name="deploy" depends="weblocation,openlayers,extjs">		
		<copy todir="${weblocation}/source">
			<fileset dir="source"/>
		</copy>
    	<copy todir="${weblocation}/resources">
			<fileset dir="resources"/>
		</copy>
    	<copy todir="${weblocation}">
			<fileset dir="examples"/>
		</copy>

		<copy todir="${weblocation}">
			<zipfileset src="OpenLayers-2.7.zip" includes="OpenLayers-2.7/* OpenLayers-2.7/img/* OpenLayers-2.7/theme/**"/>
		</copy>
		<copy todir="${weblocation}">
			<zipfileset src="ext-2.2.zip" includes="ext-2.2/* ext-2.2/adapter/ext/* ext-2.2/resources/**"/>
		</copy>
    </target>
	
	<target name="weblocation">
		<fail unless="weblocation" message="Property weblocation must be defined to a valid path"/>
		<available property="weblocation.exists" file="${weblocation}" ></available>
		<fail unless="weblocation.exists" message="Cannot find/access ${weblocation}"/>
	</target>

	<target name="openlayers" depends="openlayers.check" unless="openlayers.isdownloaded">
		<get src="${openlayersurl}" dest="OpenLayers-2.7.zip"/>
	</target>
	<target name="openlayers.check">
		<available property="openlayers.isdownloaded" file="OpenLayers-2.7.zip" ></available>
	</target>

	<target name="extjs" depends="extjs.check" unless="extjs.isdownloaded">
		<get src="${extjsurl}" dest="ext-2.2.zip"/>
	</target>
	<target name="extjs.check">
		<available property="extjs.isdownloaded" file="ext-2.2.zip" ></available>
	</target>
</project>